/*import { Injectable } from '@angular/core';
import { registroNegocioBD, Upload } from '../../modelos/registrar-negocio';
import { AngularFireDatabase, AngularFireList } from '@angular/fire/database'; 
import { AngularFireStorage } from '@angular/fire/storage';
import { finalize } from 'rxjs/operators';
import * as _swal from 'sweetalert';
import { SweetAlert } from 'sweetalert/typings/core';

const swal: SweetAlert = _swal as any;

@Injectable({
  providedIn: 'root'
})
export class RegistrarNegocioService {

  negociosUsuario: any[] = new Array;
  ListaRegistrosNegocios: AngularFireList<any>;
  
  keyNegocio: string;

  private basePath = '/Negocios';
  nombreImgNegocio: string;

  constructor(
    private firebase: AngularFireDatabase,
    private storageFirebase: AngularFireStorage
  ) { }

  consultaRegistros() {
    return this.firebase.list('tienda_informacion');
  }

  insertarRegistroPrincipal(registroNegocio: registroNegocioBD, uidUsuario: string){    
    if(registroNegocio.horarioLunesAM == "" || registroNegocio.horarioLunesPM == "") {
      registroNegocio.horarioLunesAM = 'Cerrado';
      registroNegocio.horarioLunesPM = 'Cerrado';
    }

    if(registroNegocio.horarioMartesAM == "" || registroNegocio.horarioMartesPM == "") {
      registroNegocio.horarioMartesAM = 'Cerrado';
      registroNegocio.horarioMartesPM = 'Cerrado';
    }

    if(registroNegocio.horarioMiercolesAM == "" || registroNegocio.horarioMiercolesPM == "") {
      registroNegocio.horarioMiercolesAM = 'Cerrado';
      registroNegocio.horarioMiercolesPM = 'Cerrado';
    }

    if(registroNegocio.horarioJuevesAM == "" || registroNegocio.horarioJuevesPM == "") {
      registroNegocio.horarioJuevesAM = 'Cerrado';
      registroNegocio.horarioJuevesPM = 'Cerrado';
    }

    if(registroNegocio.horarioViernesAM == "" || registroNegocio.horarioViernesPM == "") {
      registroNegocio.horarioViernesAM = 'Cerrado';
      registroNegocio.horarioViernesPM = 'Cerrado';
    }

    if(registroNegocio.horarioSabadoAM == "" || registroNegocio.horarioSabadoPM == "") {
      registroNegocio.horarioSabadoAM = 'Cerrado';
      registroNegocio.horarioSabadoPM = 'Cerrado';
    }

    if(registroNegocio.horarioDomingoAM == "" || registroNegocio.horarioDomingoPM == "") {
      registroNegocio.horarioDomingoAM = 'Cerrado';
      registroNegocio.horarioDomingoPM = 'Cerrado';
    }
    
    const id = Math.random().toString(36).substring(2);
    this.keyNegocio = id;

    this.firebase.list('tienda_informacion/' + uidUsuario).set(
      this.keyNegocio, {
        foto: 'Nada',
        nombre: registroNegocio.nombre,
        giro: registroNegocio.giro,
        descripcion: registroNegocio.descripcion,
        categoria: registroNegocio.categoria,
        telefono: registroNegocio.telefono,
        direccion: registroNegocio.direccion,
        pagina: registroNegocio.pagina,
        jerarquia: 'Principal'
    }).then(
      (res) => {

        var LatLng = {
          latitude: registroNegocio.latitud,
          longitude: registroNegocio.longitud
        }

        this.insertarRegistro2(LatLng, uidUsuario, this.keyNegocio)
      }
    );
  }

  insertarRegistroSucursal(registroNegocio: registroNegocioBD, uidUsuario: string) {
    const id = Math.random().toString(36).substring(2);
    this.keyNegocio = id;

    this.firebase.list('tienda_informacion/' + uidUsuario).set(
      this.keyNegocio, {
        foto: 'Nada',
        nombre: registroNegocio.nombre,
        giro: registroNegocio.giro,
        descripcion: registroNegocio.descripcion,
        categoria: registroNegocio.categoria,
        telefono: registroNegocio.telefono,
        direccion: registroNegocio.direccion,
        pagina: registroNegocio.pagina,
        jerarquia: 
    }).then(
      (res) => {

        var LatLng = {
          latitude: registroNegocio.latitud,
          longitude: registroNegocio.longitud
        }

        this.insertarRegistro2(LatLng, uidUsuario, this.keyNegocio)
      }
    );
  }

  insertarRegistro2(LatLng: any, uidUsuario: string, keyNegocio: string) {
    this.firebase.list('tienda_ubicaciones/' + uidUsuario).update(
      keyNegocio, {
        longitud: LatLng.latitude, 
        latitud: LatLng.longitude
    });
  }

  subirFotoPortada(upload: Upload, uidUsuarioF: string) {
    let FotoPortada: string = "FotoPortada";
    const id = Math.random().toString(36).substring(2);

    const filePath = `${this.basePath}/${uidUsuarioF}/${this.keyNegocio}/${FotoPortada}`;
    const storageRef = this.storageFirebase.ref(filePath);
    const uploadTask = this.storageFirebase.upload(filePath, upload.file);

    console.log(upload);
    console.log(uidUsuarioF);
    console.log(this.keyNegocio);
    uploadTask.snapshotChanges().pipe(
      finalize(() => {
        storageRef.getDownloadURL().subscribe(downloadURL => {
          upload.url = downloadURL;
          upload.name = upload.file.name;
          console.log(upload.url);
          console.log(upload.name);
          //setTimeout(() => {
            this.subir(uidUsuarioF, this.keyNegocio, upload.url);
          //}, 3000);
          /*this.firebase.list('tienda_informacion/' + uidUsuarioF).update(
            this.keyNegocio, {
              foto: '11111'
            }
          ).then(
            (res) => {
              swal("Se ha registrado correctamente el negocio", "", "success").then(
                (value) => {
                  window.location.href = '#/mis-negocios';
                }
              );
            }
          );
        });
      })
    ).subscribe();
  }

  subir(uidUsuarioF: string, keyNegocio: string, url: string) {
    this.firebase.list('tienda_informacion/' + uidUsuarioF).update(
      keyNegocio, {
        foto: url
      }
    )
  };

}
*/